<!--
  Generated template for the Register page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

    <ion-navbar>
        <ion-title>添加房号</ion-title>
    </ion-navbar>

</ion-header>


<ion-content padding>
    <img src="./assets/images/add-room.jpg">
    <ion-list *ngIf="zones">
        <ion-item>
            <ion-label>我的小区</ion-label>
            <ion-select [(ngModel)]="selectedZoneId" interface="action-sheet" okText="确定" cancelText="取消" placeholder="请选择" (ngModelChange)="zoneChange(selectedZoneId)">
                <ion-option *ngFor="let zone of zones" value="{{zone.id}}">{{zone.name}}</ion-option>
            </ion-select>
        </ion-item>
        <ion-item>
            <ion-label>我的组团</ion-label>
            <ion-select [(ngModel)]="selectedGroupId" interface="action-sheet" okText="确定" cancelText="取消" placeholder="请选择" disabled="{{selectedZoneId===-1}}" (ngModelChange)="groupChange(selectedGroupId)">
                <ion-option *ngFor="let group of groups" value="{{group.id}}">{{group.name}}</ion-option>
            </ion-select>
        </ion-item>
        <ion-item>
            <ion-label>楼&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;栋</ion-label>
            <ion-select [(ngModel)]="selectedBuildingId" interface="action-sheet" okText="确定" cancelText="取消" placeholder="请选择" disabled="{{selectedGroupId===-1}}" (ngModelChange)="buildingChange(selectedBuildingId)">
                <ion-option *ngFor="let building of buildings" value="{{building.id}}">{{building.name}}</ion-option>
            </ion-select>
        </ion-item>
        <ion-item>
            <ion-label>单&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;元</ion-label>
            <ion-select [(ngModel)]="selectedUnitId" interface="action-sheet" okText="确定" cancelText="取消" placeholder="请选择" disabled="{{selectedBuildingId===-1}}" (ngModelChange)="unitChange(selectedUnitId)">
                <ion-option *ngFor="let unit of units" value="{{unit.id}}">{{unit.name}}</ion-option>
            </ion-select>
        </ion-item>
        <ion-item>
            <ion-label>房&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;号</ion-label>
            <ion-select interface="action-sheet" okText="确定" cancelText="取消" placeholder="请选择" disabled="{{selectedUnitId===-1}}" [(ngModel)]="selectedRoomId">
                <ion-option *ngFor="let room of rooms" value="{{room.id}}">{{room.name}}</ion-option>
            </ion-select>
        </ion-item>
        <ion-item>
            <ion-label>预留手机</ion-label>
            <ion-input type="tel" maxlength="11" [(ngModel)]="mobile" #phone></ion-input><button [disabled]="disableVcode()" item-right ion-button (click)="sendSMS(mobile)">{{vcodeText}}</button>
        </ion-item>
        <ion-item>
            <ion-label>验证码</ion-label>
            <ion-input type="tel" [(ngModel)]="vcode"></ion-input>
        </ion-item>
    </ion-list>
    <button ion-button full color="secondary" (click)="register(selectedRoomId)">注册</button>
</ion-content>